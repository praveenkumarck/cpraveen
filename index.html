<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Birthday Surprise üéÇ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* { box-sizing: border-box; font-family: 'Poppins', sans-serif; }
body { margin:0; background:black; color:white; overflow:hidden; }

/* ===== TIMER CAT CARD ===== */
.timer-card {
  position: fixed !important;
  top: 50%; left:50%;
  transform: translate(-50%, -50%);
  width: 250px; height: 300px;
  background: #fff;
  border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
  display:flex; flex-direction:column;
  justify-content:center; align-items:center;
  text-align:center; padding:20px;
  z-index:50; box-shadow:0 0 40px #ff69b4;
  animation: catBounce 1.5s ease-in-out infinite alternate;
  position: relative;
}
.timer-card::before, .timer-card::after{
  content:""; position:absolute; top:-30px; width:50px; height:50px;
  background:#fff; border-radius:50%; transform: rotate(45deg);
}
.timer-card::before { left:30px; } /* left ear */
.timer-card::after { right:30px; } /* right ear */

@keyframes catBounce { 0%{transform:translate(-50%, -50%) scale(1);} 100%{transform:translate(-50%, -55%) scale(1.05);} }

.timer-card h2 { font-size:22px; margin-bottom:10px; color:#ff4d6d; font-weight:bold; }
.time { font-size:48px; font-weight:bold; margin-bottom:20px; }
.glow { animation: glow 1s ease-in-out infinite alternate; }
@keyframes glow { 0%{ box-shadow:0 0 20px #ffcc00; } 50%{ box-shadow:0 0 60px #ff4d6d; } 100%{ box-shadow:0 0 20px #ffcc00; } }
.open-btn { background:linear-gradient(45deg,#ff4d6d,#ffcc00); border:none; padding:12px 20px; font-size:16px; color:white; border-radius:30px; cursor:pointer; }

/* ===== FALLING HEARTS ===== */
.heart { position:absolute; font-size:24px; animation:heartFall 4s linear forwards; }
@keyframes heartFall { 0%{transform: translateY(-20px) scale(1);} 50%{transform: translateY(150px) scale(1.2);} 100%{transform: translateY(300px) scale(0); opacity:0;} }

/* ===== CONFETTI / FIREWORKS ===== */
canvas { position:fixed; inset:0; pointer-events:none; z-index:10; }

/* ===== MODAL & SLIDER ===== */
.modal { position: fixed; inset:0; display: none; align-items:center; justify-content:center; backdrop-filter:blur(12px); }
.modal.active { display:flex; }
.card { background:white; color:black; width:95%; max-width:420px; border-radius:24px; padding:16px; animation: pop .6s ease; text-align:center;}
@keyframes pop { from{transform:scale(.7);opacity:0} to{transform:scale(1);opacity:1} }
.header { display:flex; justify-content:space-between; align-items:center; }
.slider { display:flex; overflow-x:auto; scroll-snap-type:x mandatory; gap:12px; margin:16px 0; }
.slider::-webkit-scrollbar { display:none; }
.slide { min-width:100%; scroll-snap-align:center; position:relative; overflow:hidden; border-radius:18px; }
.slide img { width:100%; height:240px; object-fit:cover; animation: zoom 8s ease-in-out infinite; }
@keyframes zoom { 0%{transform:scale(1);} 100%{transform:scale(1.15);} }
.message-box { background:#f7f7f7; border-radius:18px; padding:16px; text-align:center; }
.gradient-text { font-size:24px; font-weight:bold; background:linear-gradient(270deg,#ff4d6d,#ffcc00,#7b2cff); background-size:600% 600%; -webkit-background-clip:text; -webkit-text-fill-color:transparent; animation:grad 6s ease infinite; }
@keyframes grad {0%{background-position:0%} 50%{background-position:100%} 100%{background-position:0%}}
.typing { margin-top:10px; font-size:18px; min-height:48px; }
.cursor { width:2px; background:black; display:inline-block; animation:blink 1s infinite; }
@keyframes blink {0%,50%{opacity:1} 51%,100%{opacity:0}}
.viewer { position:fixed; inset:0; background:rgba(0,0,0,.95); display:none; align-items:center; justify-content:center; z-index:100; }
.viewer.active { display:flex; }
.viewer img { max-width:95%; max-height:95%; border-radius:20px; }
.viewer span { position:absolute; top:20px; right:20px; font-size:28px; cursor:pointer; }
</style>
</head>
<body>

<canvas id="confetti"></canvas>

<!-- TIMER CAT CARD -->
<div class="timer-card" id="timerCard">
  <h2>üéÇ Birthday Countdown</h2>
  <div class="time" id="time" style="color:deeppink !important;">00:00</div>
  <button class="open-btn" onclick="manualOpen()">üéÅ Open Surprise</button>
</div>

<!-- FULLSCREEN VIEW -->
<div class="viewer" id="viewer">
  <span onclick="closeViewer()">‚ùå</span>
  <img id="viewerImg">
</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="card">
    <div class="header">
      <h2>üíñ Birthday Surprise</h2>
      <span onclick="closeModal()">‚ùå</span>
    </div>
    <div class="slider" id="slider"></div>
    <div class="message-box">
      <div class="gradient-text">üéÇ Happy Birthday üéÇ</div>
      <div class="typing" id="typing"></div>
    </div>
  </div>
</div>

<script>
/* ================= PHOTO SLIDER & TYPING ================= */
const photos = [
  "assests/images/anime-cat.jpg",
  "assests/images/anime-cute-girl.jpg",
  "assests/images/anime-girl.jpg",
  "assests/images/4.jpg"
];
const messages = [
  "",
  "",
  "",
  ""
];

const slider = document.getElementById("slider");
const typingEl = document.getElementById("typing");
let index=0, autoSlide;

photos.forEach((img)=>{
  const d=document.createElement("div");
  d.className="slide";
  d.innerHTML=`<img src="${img}" onclick="openViewer('${img}')">`;
  slider.appendChild(d);
});

function typeText(text){
  typingEl.innerHTML="";
  let i=0;
  (function t(){
    if(i<text.length){
      typingEl.innerHTML=text.slice(0,i+1)+`<span class="cursor"></span>`;
      i++; setTimeout(t,50);
    } else typingEl.innerHTML=text+`<span class="cursor"></span>`;
  })();
}

function go(i){
  slider.scrollTo({ left:slider.clientWidth*i, behavior:"smooth" });
  index=i; typeText(messages[i]);
}
function startAuto(){
  autoSlide=setInterval(()=>{ index=(index+1)%photos.length; go(index); },3000);
}
function openModal(){
  document.getElementById("modal").classList.add("active");
  go(0); startAuto();
}
function closeModal(){
  document.getElementById("modal").classList.remove("active");
  clearInterval(autoSlide);
}
function openViewer(src){
  document.getElementById("viewerImg").src=src;
  document.getElementById("viewer").classList.add("active");
}
function closeViewer(){
  document.getElementById("viewer").classList.remove("active");
}

/* ================= ‚ù§Ô∏è HEART TAP ================= */
document.addEventListener("click",e=>{
  const h=document.createElement("div");
  h.className="heart";
  h.innerText="‚ù§Ô∏è";
  h.style.left=e.clientX+"px";
  h.style.top=e.clientY+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),4000);
});

/* ================= TIMER + FALL HEARTS + LIGHTNING + FIREWORKS ================= */
(function(){
  const targetTime = Date.now() + 60000; // 1 min test
  let opened=false;

  function playTick(){
    const tick = new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");
    tick.play();
  }

  function spawnHeart(){
    const e=document.createElement("div");
    e.className="heart";
    e.innerText="üíñ";
    e.style.left=Math.random()*window.innerWidth+"px";
    e.style.top="-50px";
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),4000);
  }

  function updateTimer(){
    const now = Date.now();
    const diff = targetTime-now;
    if(diff<=0){ if(!opened) triggerMidnight(); return; }
    const s=Math.floor(diff/1000);
    const m=Math.floor(s/60);
    const sec=s%60;
    document.getElementById("time").innerText=String(m).padStart(2,"0")+":"+String(sec).padStart(2,"0");

    if(s<=10 && s>0){
      playTick();
      document.getElementById("timerCard").classList.add("glow");
      spawnHeart();
    }
  }

  function triggerMidnight(){
    opened=true;
    document.getElementById("timerCard").style.display="none";
    openModal();
    launchFireworks();
  }

  window.manualOpen=function(){
    if(!opened){ opened=true; document.getElementById("timerCard").style.display="none"; openModal(); launchFireworks(); }
  }

  setInterval(updateTimer,1000);
  updateTimer();

  /* ===== FIREWORKS ===== */
  const particles=[];
  const canvas=document.getElementById("confetti");
  const ctx=canvas.getContext("2d");
  canvas.width=innerWidth; canvas.height=innerHeight;
  function launchFireworks(){
    for(let i=0;i<8;i++){
      explode(Math.random()*canvas.width, Math.random()*canvas.height/2);
    }
  }
  function explode(x,y){
    for(let i=0;i<60;i++){
      particles.push({x,y,dx:(Math.random()-0.5)*6,dy:(Math.random()-0.5)*6,life:60,color:`hsl(${Math.random()*360},100%,50%)`});
    }
  }
  function drawFireworks(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach((p,i)=>{
      ctx.fillStyle=p.color;
      ctx.beginPath();
      ctx.arc(p.x,p.y,2,0,Math.PI*2);
      ctx.fill();
      p.x+=p.dx; p.y+=p.dy; p.life--;
      if(p.life<=0) particles.splice(i,1);
    });
    requestAnimationFrame(drawFireworks);
  }
  drawFireworks();

})();
</script>
</body>
</html>
